function typeAheadReQuery(_THIS){let __THIS=$(_THIS),TA_GROUP=__THIS.parents(".typeahead-container"),TA_INPUT=TA_GROUP.find(".typeahead__field").find("input");TA_INPUT.focus(),TA_INPUT.trigger("input.typeahead")}function typeaheadFactory(_taVars){_taVars||alert("config verplicht");const taVars=mapNaarJson(mergeMappen(taMapDefauls,jsonNaarMap(_taVars)));taVars.debug&&console.log("typeaheadFactory-incoming-settings:",_taVars),taVars.debug&&console.log("typeaheadFactory-default-settings:",taMapDefauls),taVars.debug?console.table(taVars):console.log("typeaheadFactory-settings:",taVars),taVars.field||alert("config field verplicht"),taVars.rest||alert("config rest verplicht"),taVars.targetField||alert("config targetField verplicht"),taVars.idProperty||alert("config idProperty verplicht"),taVars.placeholder?$(taVars.field).attr("placeholder",taVars.placeholder):"en"==taVars.lang?$(taVars.field).attr("placeholder","Search"):$(taVars.field).attr("placeholder","Zoeken");const typeaheadInstance=$.typeahead({display:[taVars.displayProperty],debug:taVars.debug,input:taVars.field,minLength:taVars.min,maxItem:taVars.max,delay:taVars.delay,hint:!1,order:null,dynamic:!0,filter:!1,cache:!1,emptyTemplate:function(query){taVars.debug&&console.table({"Typeahead.emptyTemplate":"-","taVars.emptyText":taVars.emptyText,"taVars.newText":taVars.newText,"taVars.triggerOnNew":taVars.triggerOnNew,"taVars.newAsButton":taVars.newAsButton});var emptyLi=$("<li>",{text:taVars.emptyText,class:"typeahead__item typeahead__group-group extra_items"});if(taVars.newText){if(taVars.triggerOnNew){if(taVars.newAsButton){var newElementButton=$("<li/>",{class:"typeahead__item typeahead__group-group"}).append($("<a/>",{text:taVars.newText,class:"btn btn-primary","data-on-click":taVars.triggerOnNew,style:"color: var(--dark-blue); display: inline-block; margin: 5px; padding: 13px 15px 12px 15px;",onclick:"event.preventDefault();$($(this).attr('data-on-click')).click();"})),combi=$("<span/>");return combi.append(emptyLi),combi.append(newElementButton),console.log("Typeahead.emptyTemplate:newElementButton:",combi.html()),combi}var newElementTrigger=$("<li/>",{text:taVars.newText,class:"typeahead__item typeahead__group-group extra_items extra_items_add",style:"cursor: pointer;","data-on-click":taVars.triggerOnNew,onclick:"event.preventDefault();$($(this).attr('data-on-click')).click();"});combi=$("<span/>");return combi.append(emptyLi),combi.append(newElementTrigger),console.log("Typeahead.emptyTemplate:newElementTrigger:",combi.html()),combi}var newElement=$("<li/>",{text:taVars.newText,class:"typeahead__item typeahead__group-group extra_items extra_items_add",style:"cursor: pointer;"});combi=$("<span/>");return combi.append(emptyLi),combi.append(newElement),console.log("Typeahead.emptyTemplate:newElement:",combi.html()),combi}return console.log("Typeahead.emptyTemplate:emptyLi:",emptyLi.html()),emptyLi},template:function(query,item){return taVars.htmlProperty},source:{ajax:function(query){return{type:"GET",url:REST+taVars.rest,path:taVars.restReturnPath,data:mapNaarJson(mergeMappen(jsonNaarMap({max:taVars.max,query:taVars.query,lang:taVars.lang}),jsonNaarMap(taVars.extraRestParameters))),beforeSend:function(jqXHR,options){},callback:{done:function(data){return typeaheadInstances.get(taVars.field).node._json=data,data},fail:function(jqXHR,textStatus,errorThrown){},always:function(data,textStatus,jqXHR){},then:function(jqXHR,textStatus){}}}}},callback:{onInit:function(node){taVars.debug&&console.table({"Typeahead.onInit":"-","taVars.onBlur":taVars.onBlur}),taVars.onBlur&&node.blur(function(){if(taVars.debug&&console.table({"Typeahead.onBlur":"-","node._data":node._data,"node._selectedIdentification":node._selectedIdentification}),node._selectedIdentification);else{if(taVars.onlySuccessfulMatch){let typeaheadInstance=typeaheadInstances.get(taVars.field);typeaheadInstance.resetInput(),typeaheadInstance.toggleCancelButtonVisibility(),$(taVars.targetField).val(null)}taVars.markSuccessfulSearch&&$(taVars.field).parent().removeClass(taVars.hasSuccessClass),$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html("")}})},onResult:function(node,query,obj,objCount,resultCountPerGroup){taVars.debug&&console.table({"Typeahead.onResult":"-",query:query,objCount:objCount,resultCountPerGroup:resultCountPerGroup}),node._query=query,node._object=obj,node._count=objCount,node._countPerGroup=resultCountPerGroup,node._selectedIdentification=null,$(taVars.targetField).val(null),taVars.markSuccessfulSearch&&$(taVars.field).parent().removeClass(taVars.hasSuccessClass),query.length>=taVars.min&&node._json&&node._json.totalResults?$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html(Math.min(taVars.max,objCount)+" resultaten."):$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html("")},onPopulateSource:function(node,data,group,path){return taVars.debug&&console.table({"Typeahead.onPopulateSource":"-",data:data,group:group,path:path}),node._data=data,data},onClickBefore:function(node,a,item,event){taVars.debug&&console.table({"Typeahead.onClickBefore":"-",a:a,item:item,event:event})},onClickAfter:function(node,a,item,event){if(taVars.debug&&console.table({"Typeahead.onClickAfter":"-",a:a,item:item,"item[taVars.idProperty]":item[taVars.idProperty],"taVars.markSuccessfulSearch":taVars.markSuccessfulSearch,"taVars.targetField":taVars.targetField,"taVars.triggerOnSelect":taVars.triggerOnSelect,"taVars.resetOnTriggerOnSelect":taVars.resetOnTriggerOnSelect}),node._selectedIdentification=item[taVars.idProperty],$(taVars.targetField).val(item[taVars.idProperty]),taVars.markSuccessfulSearch&&$(taVars.field).parent().addClass(taVars.hasSuccessClass),$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html(""),taVars.triggerOnSelect&&($(taVars.triggerOnSelect).click(),taVars.resetOnTriggerOnSelect)){let typeaheadInstance=typeaheadInstances.get(taVars.field);typeaheadInstance.resetInput(),typeaheadInstance.toggleCancelButtonVisibility(),$(taVars.targetField).val(null),node._selectedIdentification=null,taVars.markSuccessfulSearch&&$(taVars.field).parent().removeClass(taVars.hasSuccessClass),$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html("")}},onNavigateBefore:function(node,query,event){taVars.debug&&console.table({"Typeahead.onNavigateBefore":"-",query:query,event:event})},onLayoutBuiltBefore:function(node,query,result,resultHtmlList){if(taVars.debug&&console.table({"Typeahead.onLayoutBuiltBefore":"-",query:query,result:result,resultHtmlList:resultHtmlList,"taVars.max":taVars.max,"node._count":node._count,"node._json.totalResults":node._json.totalResults,"taVars.moreText":taVars.moreText,"taVars.newText":taVars.newText,"taVars.newAsButton":taVars.newAsButton,MORE:resultHtmlList&&taVars.moreText&&node._json.totalResults>taVars.max,NEW:taVars.newText&&resultHtmlList&&node._count>0}),resultHtmlList&&taVars.moreText&&node._json.totalResults>taVars.max&&resultHtmlList.append($("<li/>",{text:taVars.moreText.replace("{{total}}",node._json.totalResults),class:"typeahead__item typeahead__group-group extra_items extra_items_more",style:"padding: 0.5rem 0.75rem;"})),taVars.newText&&resultHtmlList&&node._count>0){let liEl;liEl=taVars.triggerOnNew?taVars.newAsButton?$("<li/>",{class:"typeahead__item typeahead__group-group"}).append($("<a/>",{text:taVars.newText,class:"btn btn-primary","data-on-click":taVars.triggerOnNew,style:"color: var(--dark-blue); display: inline-block; margin: 5px; padding: 13px 15px 12px 15px;",onclick:"event.preventDefault();$($(this).attr('data-on-click')).click();"})):$("<li/>",{text:taVars.newText,class:"typeahead__item typeahead__group-group extra_items extra_items_add",style:"cursor: pointer;","data-on-click":taVars.triggerOnNew,onclick:"event.preventDefault();$($(this).attr('data-on-click')).click();"}):$("<li/>",{text:taVars.newText,class:"typeahead__item typeahead__group-group extra_items extra_items_add",style:"cursor: pointer;"}),resultHtmlList.append(liEl)}return resultHtmlList},onLayoutBuiltAfter:function(node,query,result,resultHtmlList){},onCancel:function(node,event){taVars.debug&&console.table({"Typeahead.onCancel":"-",event:event}),node._selectedIdentification=null,$(taVars.targetField).val(null),taVars.markSuccessfulSearch&&$(taVars.field).parent().removeClass(taVars.hasSuccessClass),$(taVars.field).parents(".typeahead__container").parent().children(".typeahead__resultcontainer").html("")}}});typeaheadInstances.set(_taVars.field,typeaheadInstance)}const typeaheadInstances=new Map;var taMapDefauls=new Map;taMapDefauls.set("min",2),taMapDefauls.set("delay",500),taMapDefauls.set("emptyText","---"),taMapDefauls.set("max",10),taMapDefauls.set("query","{{query}}"),taMapDefauls.set("lang",$("html").attr("lang")),taMapDefauls.set("htmlProperty","{{html}}"),taMapDefauls.set("idProperty","uid"),taMapDefauls.set("displayProperty","display"),taMapDefauls.set("onlySuccessfulMatch",!0),taMapDefauls.set("markSuccessfulSearch",!0),taMapDefauls.set("onBlur",!0),taMapDefauls.set("newAsButton",!1),taMapDefauls.set("hasSuccessClass","is-valid");