(function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("jquery")):factory(window.jQuery)})(function($){"use strict";var $h,Rating;$.fn.ratingLocales={},$.fn.ratingThemes={},$h={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:10,DEFAULT_STEP:1,isEmpty:function(value,trim){return null==value||0===value.length||trim&&""===$.trim(value)},getCss:function(condition,css){return condition?" "+css:""},addCss:function($el,css){$el.removeClass(css).addClass(css)},getDecimalPlaces:function(num){var m=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return m?Math.max(0,(m[1]?m[1].length:0)-(m[2]?+m[2]:0)):0},applyPrecision:function(val,precision){return parseFloat(val.toFixed(precision))},handler:function($el,event,callback,skipOff,skipNS){var ev=skipNS?event:event.split(" ").join($h.NAMESPACE+" ")+$h.NAMESPACE;skipOff||$el.off(ev),$el.on(ev,callback)}},Rating=function(element,options){var self=this;self.$element=$(element),self._init(options)},Rating.prototype={constructor:Rating,_parseAttr:function(vattr,options){var finalVal,val,chk,out,self=this,$el=self.$element,elType=$el.attr("type");if("range"===elType||"number"===elType){switch(val=options[vattr]||$el.data(vattr)||$el.attr(vattr),vattr){case"min":chk=$h.DEFAULT_MIN;break;case"max":chk=$h.DEFAULT_MAX;break;default:chk=$h.DEFAULT_STEP}finalVal=$h.isEmpty(val)?chk:val,out=parseFloat(finalVal)}else out=parseFloat(options[vattr]);return isNaN(out)?chk:out},_parseValue:function(val){var self=this,v=parseFloat(val);return isNaN(v)&&(v=self.clearValue),!self.zeroAsNull||0!==v&&"0"!==v?v:null},_setDefault:function(key,val){var self=this;$h.isEmpty(self[key])&&(self[key]=val)},_initSlider:function(options){var self=this,v=self.$element.val();self.initialValue=$h.isEmpty(v)?0:v,self._setDefault("min",self._parseAttr("min",options)),self._setDefault("max",self._parseAttr("max",options)),self._setDefault("step",self._parseAttr("step",options)),(isNaN(self.min)||$h.isEmpty(self.min))&&(self.min=$h.DEFAULT_MIN),(isNaN(self.max)||$h.isEmpty(self.max))&&(self.max=$h.DEFAULT_MAX),(isNaN(self.step)||$h.isEmpty(self.step)||0===self.step)&&(self.step=$h.DEFAULT_STEP),self.diff=self.max-self.min},_initHighlight:function(v){var w,self=this,cap=self._getCaption();v||(v=self.$element.val()),w=self.getWidthFromValue(v)+"%",self.$filledStars.width(w),self.cache={caption:cap,width:w,val:v}},_getContainerCss:function(){var self=this;return"rating-container"+$h.getCss(self.theme,"theme-"+self.theme)+$h.getCss(self.rtl,"rating-rtl")+$h.getCss(self.size,"rating-"+self.size)+$h.getCss(self.animate,"rating-animate")+$h.getCss(self.disabled||self.readonly,"rating-disabled")+$h.getCss(self.containerClass,self.containerClass)+(self.displayOnly?" is-display-only":"")},_checkDisabled:function(){var self=this,$el=self.$element,opts=self.options;self.disabled=void 0===opts.disabled?$el.attr("disabled")||!1:opts.disabled,self.readonly=void 0===opts.readonly?$el.attr("readonly")||!1:opts.readonly,self.inactive=self.disabled||self.readonly,$el.attr({disabled:self.disabled,readonly:self.readonly})},_addContent:function(type,content){var self=this,$container=self.$container,isClear="clear"===type;return self.rtl?isClear?$container.append(content):$container.prepend(content):isClear?$container.prepend(content):$container.append(content)},_generateRating:function(){var $rating,$container,w,self=this,$el=self.$element;$container=self.$container=$(document.createElement("div")).insertBefore($el),$h.addCss($container,self._getContainerCss()),self.$rating=$rating=$(document.createElement("div")).attr("class","rating-stars").appendTo($container).append(self._getStars("empty")).append(self._getStars("filled")),self.$emptyStars=$rating.find(".empty-stars"),self.$filledStars=$rating.find(".filled-stars"),self._renderCaption(),self._renderClear(),self._initHighlight(),self._initCaptionTitle(),$container.append($el),self.rtl&&(w=Math.max(self.$emptyStars.outerWidth(),self.$filledStars.outerWidth()),self.$emptyStars.width(w)),$el.appendTo($rating)},_getCaption:function(){var self=this;return self.$caption&&self.$caption.length?self.$caption.html():self.defaultCaption},_setCaption:function(content){var self=this;self.$caption&&self.$caption.length&&self.$caption.html(content)},_renderCaption:function(){var html,self=this,val=self.$element.val(),$cap=self.captionElement?$(self.captionElement):"";if(self.showCaption){if(html=self.fetchCaption(val),$cap&&$cap.length)return $h.addCss($cap,"caption"),$cap.html(html),void(self.$caption=$cap);self._addContent("caption",'<div class="caption">'+html+"</div>"),self.$caption=self.$container.find(".caption")}},_renderClear:function(){var css,self=this,$clr=self.clearElement?$(self.clearElement):"";if(self.showClear){if(css=self._getClearClass(),$clr.length)return $h.addCss($clr,css),$clr.attr({title:self.clearButtonTitle}).html(self.clearButton),void(self.$clear=$clr);self._addContent("clear",'<div class="'+css+'" title="'+self.clearButtonTitle+'">'+self.clearButton+"</div>"),self.$clear=self.$container.find("."+self.clearButtonBaseClass)}},_getClearClass:function(){var self=this;return self.clearButtonBaseClass+" "+(self.inactive?"":self.clearButtonActiveClass)},_toggleHover:function(out){var w,width,caption,self=this;out&&(self.hoverChangeStars&&(w=self.getWidthFromValue(self.clearValue),width=out.val<=self.clearValue?w+"%":out.width,self.$filledStars.css("width",width)),self.hoverChangeCaption&&(caption=out.val<=self.clearValue?self.fetchCaption(self.clearValue):out.caption,caption&&self._setCaption(caption+"")))},_init:function(options){var v,self=this,$el=self.$element.addClass("rating-input");return self.options=options,$.each(options,function(key,value){self[key]=value}),(self.rtl||"rtl"===$el.attr("dir"))&&(self.rtl=!0,$el.attr("dir","rtl")),self.starClicked=!1,self.clearClicked=!1,self._initSlider(options),self._checkDisabled(),self.displayOnly&&(self.inactive=!0,self.showClear=!1,self.hoverEnabled=!1,self.hoverChangeCaption=!1,self.hoverChangeStars=!1),self._generateRating(),self._initEvents(),self._listen(),v=self._parseValue($el.val()),$el.val(v),$el.removeClass("rating-loading")},_initCaptionTitle:function(){var caption,self=this;self.showCaptionAsTitle&&(caption=self.fetchCaption(self.$element.val()),self.$rating.attr("title",$(caption).text()))},_trigChange:function(params){var self=this;self._initCaptionTitle(),self.$element.trigger("change").trigger("rating:change",params)},_initEvents:function(){var self=this;self.events={_getTouchPosition:function(e){var pageX=$h.isEmpty(e.pageX)?e.originalEvent.touches[0].pageX:e.pageX;return pageX-self.$rating.offset().left},_listenClick:function(e,callback){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;callback(e),e.handled=!0},_noMouseAction:function(e){return!self.hoverEnabled||self.inactive||e&&e.isDefaultPrevented()},initTouch:function(e){var ev,touches,pos,out,caption,w,width,params,clrVal=self.clearValue||0,isTouchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;isTouchCapable&&!self.inactive&&(ev=e.originalEvent,touches=$h.isEmpty(ev.touches)?ev.changedTouches:ev.touches,pos=self.events._getTouchPosition(touches[0]),"touchend"===e.type?(self._setStars(pos),params=[self.$element.val(),self._getCaption()],self._trigChange(params),self.starClicked=!0):(out=self.calculate(pos),caption=out.val<=clrVal?self.fetchCaption(clrVal):out.caption,w=self.getWidthFromValue(clrVal),width=out.val<=clrVal?w+"%":out.width,self._setCaption(caption),self.$filledStars.css("width",width)))},starClick:function(e){var pos,params;self.events._listenClick(e,function(ev){if(self.inactive)return!1;pos=self.events._getTouchPosition(ev),self._setStars(pos),params=[self.$element.val(),self._getCaption()],self._trigChange(params),self.starClicked=!0})},clearClick:function(e){self.events._listenClick(e,function(){self.inactive||(self.clear(),self.clearClicked=!0)})},starMouseMove:function(e){var pos,out;self.events._noMouseAction(e)||(self.starClicked=!1,pos=self.events._getTouchPosition(e),out=self.calculate(pos),self._toggleHover(out),self.$element.trigger("rating:hover",[out.val,out.caption,"stars"]))},starMouseLeave:function(e){var out;self.events._noMouseAction(e)||self.starClicked||(out=self.cache,self._toggleHover(out),self.$element.trigger("rating:hoverleave",["stars"]))},clearMouseMove:function(e){var caption,val,width,out;!self.events._noMouseAction(e)&&self.hoverOnClear&&(self.clearClicked=!1,caption='<span class="'+self.clearCaptionClass+'">'+self.clearCaption+"</span>",val=self.clearValue,width=self.getWidthFromValue(val)||0,out={caption:caption,width:width,val:val},self._toggleHover(out),self.$element.trigger("rating:hover",[val,caption,"clear"]))},clearMouseLeave:function(e){var out;self.events._noMouseAction(e)||self.clearClicked||!self.hoverOnClear||(out=self.cache,self._toggleHover(out),self.$element.trigger("rating:hoverleave",["clear"]))},resetForm:function(e){e&&e.isDefaultPrevented()||self.inactive||self.reset()}}},_listen:function(){var self=this,$el=self.$element,$form=$el.closest("form"),$rating=self.$rating,$clear=self.$clear,events=self.events;return $h.handler($rating,"touchstart touchmove touchend",$.proxy(events.initTouch,self)),$h.handler($rating,"click touchstart",$.proxy(events.starClick,self)),$h.handler($rating,"mousemove",$.proxy(events.starMouseMove,self)),$h.handler($rating,"mouseleave",$.proxy(events.starMouseLeave,self)),self.showClear&&$clear.length&&($h.handler($clear,"click touchstart",$.proxy(events.clearClick,self)),$h.handler($clear,"mousemove",$.proxy(events.clearMouseMove,self)),$h.handler($clear,"mouseleave",$.proxy(events.clearMouseLeave,self))),$form.length&&$h.handler($form,"reset",$.proxy(events.resetForm,self),!0),$el},_getStars:function(type){var i,self=this,stars='<span class="'+type+'-stars">';for(i=1;i<=self.stars;i++)stars+='<span class="star">'+self[type+"Star"]+"</span>";return stars+"</span>"},_setStars:function(pos){var self=this,out=arguments.length?self.calculate(pos):self.calculate(),$el=self.$element,v=self._parseValue(out.val);return $el.val(v),self.$filledStars.css("width",out.width),self._setCaption(out.caption),self.cache=out,$el},showStars:function(val){var self=this,v=self._parseValue(val);return self.$element.val(v),self._initCaptionTitle(),self._setStars()},calculate:function(pos){var self=this,defaultVal=$h.isEmpty(self.$element.val())?0:self.$element.val(),val=arguments.length?self.getValueFromPosition(pos):defaultVal,caption=self.fetchCaption(val),width=self.getWidthFromValue(val);return width+="%",{caption:caption,width:width,val:val}},getValueFromPosition:function(pos){var val,factor,self=this,precision=$h.getDecimalPlaces(self.step),maxWidth=self.$rating.width();return factor=self.diff*pos/(maxWidth*self.step),factor=self.rtl?Math.floor(factor):Math.ceil(factor),val=$h.applyPrecision(parseFloat(self.min+factor*self.step),precision),val=Math.max(Math.min(val,self.max),self.min),self.rtl?self.max-val:val},getWidthFromValue:function(val){var factor,w,self=this,min=self.min,max=self.max,$r=self.$emptyStars;return!val||val<=min||min===max?0:(w=$r.outerWidth(),factor=w?$r.width()/w:1,val>=max?100:(val-min)*factor*100/(max-min))},fetchCaption:function(rating){var css,cap,capVal,cssVal,caption,self=this,val=parseFloat(rating)||self.clearValue,vCap=self.starCaptions,vCss=self.starCaptionClasses,width=self.getWidthFromValue(val);return val&&val!==self.clearValue&&(val=$h.applyPrecision(val,$h.getDecimalPlaces(self.step))),cssVal="function"==typeof vCss?vCss(val,width):vCss[val],capVal="function"==typeof vCap?vCap(val,width):vCap[val],cap=$h.isEmpty(capVal)?self.defaultCaption.replace(/\{rating}/g,val):capVal,css=$h.isEmpty(cssVal)?self.clearCaptionClass:cssVal,caption=val===self.clearValue?self.clearCaption:cap,'<span class="'+css+'">'+caption+"</span>"},destroy:function(){var self=this,$el=self.$element;return $h.isEmpty(self.$container)||self.$container.before($el).remove(),$.removeData($el.get(0)),$el.off("rating").removeClass("rating rating-input")},create:function(options){var self=this,opts=options||self.options||{};return self.destroy().rating(opts)},clear:function(){var self=this,title='<span class="'+self.clearCaptionClass+'">'+self.clearCaption+"</span>";return self.inactive||self._setCaption(title),self.showStars(self.clearValue).trigger("change").trigger("rating:clear")},reset:function(){var self=this;return self.showStars(self.initialValue).trigger("rating:reset")},update:function(val){var self=this;return arguments.length?self.showStars(val):self.$element},refresh:function(options){var self=this,$el=self.$element;return options?self.destroy().rating($.extend(!0,self.options,options)).trigger("rating:refresh"):$el}},$.fn.rating=function(option){var args=Array.apply(null,arguments),retvals=[];switch(args.shift(),this.each(function(){var opts,self=$(this),data=self.data("rating"),options="object"==typeof option&&option,theme=options.theme||self.data("theme"),lang=options.language||self.data("language")||"en",thm={},loc={};data||(theme&&(thm=$.fn.ratingThemes[theme]||{}),"en"===lang||$h.isEmpty($.fn.ratingLocales[lang])||(loc=$.fn.ratingLocales[lang]),opts=$.extend(!0,{},$.fn.rating.defaults,thm,$.fn.ratingLocales.en,loc,options,self.data()),data=new Rating(this,opts),self.data("rating",data)),"string"==typeof option&&retvals.push(data[option].apply(data,args))}),retvals.length){case 0:return this;case 1:return void 0===retvals[0]?this:retvals[0];default:return retvals}},$.fn.rating.defaults={theme:"",language:"en",stars:10,filledStar:'<i class="mdi mdi-star"></i>',emptyStar:'<i class="mdi mdi-star-outline"></i>',containerClass:"",size:"xs",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{0:"label rg-0",.5:"label rg-1",1:"label rg-2",1.5:"label rg-3",2:"label rg-4",2.5:"label rg-5 ",3:"label rg-6",3.5:"label rg-7",4:"label rg-8",4.5:"label rg-9",5:"label rg-10",5.5:"label rg-11",6:"label rg-12",6.5:"label rg-13",7:"label rg-14",7.5:"label rg-15",8:"label rg-16",8.5:"label rg-17",9:"label rg-18",9.5:"label rg-19",10:"label rg-20"},clearButton:'<i class="fas fa-minus-circle text-danger"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default badge-secondary",clearValue:null,captionElement:null,clearElement:null,showCaptionAsTitle:!0,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0,zeroAsNull:!0},$.fn.ratingLocales.en={defaultCaption:"{rating}",starCaptions:{0:"0",.5:"0.5",1:"1",1.5:"1.5",2:"2",2.5:"2.5",3:"3",3.5:"3.5",4:"4",4.5:"4.5",5:"5",5.5:"5.5",6:"6",6.5:"6.5",7:"7",7.5:"7.5",8:"8",8.5:"8.5",9:"9",9.5:"9.5",10:"10"},clearButtonTitle:"Clear",clearCaption:"0"},$.fn.rating.Constructor=Rating,$(document).ready(function(){var $input=$("input.rating");$input.length&&$input.removeClass("rating-loading").addClass("rating-loading").rating()})});