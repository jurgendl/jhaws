$.typeahead({input:"#$ID$",delay:$DELAY$,minLength:$MIN$,maxItem:$MAX$,accent:!1,hint:!1,order:null,dynamic:!0,filter:!1,source:{ajax:function(query){return{type:"GET",url:REST+"$URL$",data:{max:$MAX$,$QUERY$:"{{query}}"},callback:{done:function(data){return console.log(data),data},fail:function(jqXHR,textStatus,errorThrown){console.log("fail")}}}}},display:[$PROPERTIES$],emptyTemplate:"no result for {{query}}",template:function(query,item){return $TEMPLATE$},callback:{onInit:function(node){console.log("Typeahead Initiated on "+node.selector),node.blur(function(){if($("#$RESULTS_ID$").html(""),node._data&&!$FREE$){for(var val=node[0].value,i=0;i<node._data.length;i++)if(node._data[i].$PROPERTY$==val)return;node[0].value=null}})},onResult:function(node,query,obj,objCount){console.log(objCount);var text="";""!==query&&query.length>=2&&(text='<span class="badge badge-pill badge-light">'+objCount+"</span>"),$("#$RESULTS_ID$").html(text)},onPopulateSource:function(node,data,group,path){return node._data=data,data}},debug:!0});